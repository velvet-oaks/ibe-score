<h1
	mat-dialog-title
	*ngIf="data.type === 'login'">
	Please Sign In
</h1>
<h1
	mat-dialog-title
	*ngIf="data.type === 'signUp'">
	Please Sign Up
</h1>
<div
	mat-dialog-content
	[ngClass]="{ 'login-dialog': data.type === 'login' }">
	<ng-container *ngIf="data.type === 'login'">
		<mat-tab-group
			animationDuration="0ms"
			(selectedTabChange)="selectedTab = $event.tab.textLabel.toLowerCase()">
			<mat-tab label="Game Code">
				<form [formGroup]="slotForm">
					<!-- Slot form fields here -->
					<mat-form-field>
						<mat-label>Game Code</mat-label>
						<input
							type="text"
							matInput
							formControlName="slot"
							[errorStateMatcher]="matcher"
							placeholder="Ex. slotABC123" />
						<mat-error *ngIf="slotForm.controls.slot.errors?.required">
							Game Code <strong>required</strong>
						</mat-error>
					</mat-form-field>
					<mat-form-field>
						<mat-label>Password</mat-label>
						<input
							[type]="hide ? 'password' : 'text'"
							matInput
							formControlName="password"
							(keydown.enter)="submitForm()" />
						<mat-icon
							matSuffix
							(click)="hide = !hide">
							{{ hide ? 'visibility_off' : 'visibility' }}
						</mat-icon>
						<mat-error *ngIf="slotForm.controls.password.errors?.required">
							Password <strong>required</strong>
						</mat-error>
					</mat-form-field>
				</form>
			</mat-tab>
			<mat-tab label="Username">
				<form [formGroup]="usernameForm">
					<!-- Username form fields here -->
					<mat-form-field>
						<mat-label>User Name</mat-label>
						<input
							type="text"
							matInput
							formControlName="user_name"
							placeholder="Ex. john_doe" />
						<mat-error *ngIf="usernameForm.controls.user_name.errors?.required">
							UserName <strong>required</strong>
						</mat-error>
					</mat-form-field>
					<mat-form-field>
						<mat-label>Password</mat-label>
						<input
							[type]="hide ? 'password' : 'text'"
							matInput
							formControlName="password"
							(keydown.enter)="submitForm()" />
						<mat-icon
							matSuffix
							(click)="hide = !hide">
							{{ hide ? 'visibility_off' : 'visibility' }}
						</mat-icon>
						<mat-error *ngIf="usernameForm.controls.password.errors?.required">
							Password <strong>required</strong>
						</mat-error>
					</mat-form-field>
				</form>
			</mat-tab>
		</mat-tab-group>
	</ng-container>
	<form
		class="example-form sign-up"
		[formGroup]="signUpForm"
		*ngIf="data.type == 'signUp'">
		<mat-form-field>
			<mat-label>Full Name</mat-label>
			<input
				type="text"
				matInput
				formControlName="name"
				[errorStateMatcher]="matcher"
				placeholder="Ex. John Doe" />
			<mat-error *ngIf="signUpForm.controls.name.errors?.required">
				Name <strong>required</strong>
			</mat-error>
		</mat-form-field>
		<mat-form-field>
			<mat-label>User Name</mat-label>
			<input
				type="text"
				matInput
				formControlName="username"
				[errorStateMatcher]="matcher"
				placeholder="Ex. John_Doe" />
			<mat-error *ngIf="signUpForm.controls.username.errors?.required">
				UserName <strong>required</strong>
			</mat-error>
			<mat-error *ngIf="!unqiueUserError">
				UserName <strong>is taken</strong>
			</mat-error>
		</mat-form-field>
		<mat-form-field class="example-full-width">
			<mat-label>Email</mat-label>
			<input
				type="email"
				matInput
				formControlName="email"
				[errorStateMatcher]="matcher"
				placeholder="Ex. pat@example.com" />
			<mat-error *ngIf="signUpForm.controls.email.errors?.required">
				Email is <strong>required</strong>
			</mat-error>
			<mat-error *ngIf="signUpForm.controls.email.errors?.email">
				Valid email is <strong>required</strong>
			</mat-error>
		</mat-form-field>

		<mat-form-field>
			<mat-label>Type</mat-label>
			<mat-select formControlName="type">
				<mat-option
					*ngFor="let accountType of accountTypes"
					value="{{ accountType.typeCode }}">
					{{ accountType.name }}
				</mat-option>
			</mat-select>
			<mat-error *ngIf="signUpForm.controls.type.errors?.required">
				Type is <strong>required</strong>
			</mat-error>
		</mat-form-field>
		<!-- <mat-form-field class="example-full-width city-mat-form-field">
			<mat-label>City</mat-label>
			<input
				type="text"
				matInput
				[(ngModel)]="citySearchText"
				(input)="filterCities()"
				formControlName="city"
				[errorStateMatcher]="matcher"
				placeholder="Start typing.." />
			<mat-autocomplete #auto="matAutocomplete">
				<mat-option
					*ngFor="let city of filteredCities"
					[value]="city">
					{{ city }}</mat-option
				>
			</mat-autocomplete>
			<mat-error *ngIf="signUpForm.controls.email.errors?.required">
				Email is <strong>required</strong>
			</mat-error>
			<mat-error *ngIf="signUpForm.controls.email.errors?.email">
				Valid email is <strong>required</strong>
			</mat-error>
		</mat-form-field> -->
		<!-- City -->
		<mat-form-field>
			<mat-label>City</mat-label>
			<input
				type="text"
				matInput
				formControlName="city" />
			<span
				class="error-span"
				*ngIf="
					signUpForm.get('tel_phone').hasError('pattern') &&
					signUpForm.get('tel_phone').touched
				">
				Phone Number is <strong>invalid</strong>
			</span>
			<span
				class="error-span"
				*ngIf="
					signUpForm.get('tel_phone').hasError('required') &&
					signUpForm.get('tel_phone').touched
				">
				Phone Number is <strong>required</strong>
			</span>
		</mat-form-field>
		<!-- Country -->
		<mat-form-field>
			<mat-label>Country</mat-label>
			<mat-select
				formControlName="country"
				id="country">
				<mat-option
					value=""
					disabled
					selected
					>Select Country</mat-option
				>
				<mat-option
					*ngFor="let country of revisedCountries"
					[value]="country.name"
					>{{ country.emoji + ' ' + country.name }}</mat-option
				>
				<!-- <mat-option value="England">England</mat-option>
				<mat-option value="Scotland">Scotland</mat-option>
				<mat-option value="Wales">Wales</mat-option>
				<mat-option value="NI">NI</mat-option> -->
			</mat-select>

			<mat-error *ngIf="signUpForm.controls.type.errors?.required">
				Type is <strong>required</strong>
			</mat-error>
		</mat-form-field>

		<div class="custom-field-wrapper">
			<div
				class="form-field-custom"
				style="display: flex">
				<label
					for="dialcode"
					class="dialcode-label"
					>Country Code
					<input
						type="text"
						matInput
						formControlName="dialingCode"
						name="dialcode"
						[readonly]="disabledDialingCode"
						class="dialing-code"
						[class.error]="
							signUpForm.get('dialingCode').invalid &&
							signUpForm.get('dialingCode').touched
						"
						placeholder="" />
				</label>
				<label
					for="tel_phone"
					class="tel-label"
					[class.error]="
						(signUpForm.get('tel_phone').hasError('required') ||
							signUpForm.get('tel_phone').hasError('pattern')) &&
						signUpForm.get('tel_phone').touched
					"
					>Telephone (without country code)
					<input
						class="tel-field"
						type="email"
						matInput
						formControlName="tel_phone"
						name="tel_phone"
						[class.error]="
							(signUpForm.get('tel_phone').hasError('pattern') ||
								signUpForm.get('tel_phone').hasError('required')) &&
							signUpForm.get('tel_phone').touched
						"
						placeholder="Ex. 01245554445" />
				</label>
			</div>
			<span
				class="error-span"
				*ngIf="
					signUpForm.get('tel_phone').hasError('pattern') &&
					signUpForm.get('tel_phone').touched
				">
				Phone Number is <strong>invalid</strong>
			</span>
			<span
				class="error-span"
				*ngIf="
					signUpForm.get('tel_phone').hasError('required') &&
					signUpForm.get('tel_phone').touched
				">
				Phone Number is <strong>required</strong>
			</span>
		</div>

		<!-- <mat-form-field
			class="example-full-width mat-tel-field"
			id="telephoneFieldWrapper">
			<mat-label>Phone Number</mat-label>
			<input
				type="text"
				matInput
				formControlName="dialingCode"
				[readonly]="disabledDialingCode"
				class="dialing-code"
				placeholder="Country Code" />
			<input
				class="tel-field"
				type="email"
				matInput
				formControlName="tel_phone"
				[errorStateMatcher]="matcher"
				placeholder="Ex. +441134960000" />

			<mat-error *ngIf="signUpForm.controls.tel_phone.errors?.required">
				Phone Number is <strong>required</strong>
			</mat-error>
			<mat-error *ngIf="signUpForm.controls.tel_phone.errors">
				Valid Number is <strong>required</strong>
			</mat-error>
		</mat-form-field> -->
		<mat-form-field class="example-full-width">
			<mat-label>Slot</mat-label>
			<input
				type="text"
				matInput
				formControlName="slot"
				[errorStateMatcher]="matcher"
				placeholder="Ex. 1234" />
			<mat-error *ngIf="signUpForm.controls.slot.errors?.required">
				Slot is <strong>required</strong>
			</mat-error>
			<mat-error *ngIf="signUpForm.controls.slot.errors">
				Valid Slot must be <strong>letters and numbers only</strong>
			</mat-error>
			<mat-hint> Choose or a game code, or one will be chosen for you </mat-hint>
		</mat-form-field>
		<br />
		<mat-form-field>
			<mat-label>Password</mat-label>
			<input
				type="password"
				matInput
				formControlName="password"
				[errorStateMatcher]="matcher" />
			<mat-error *ngIf="signUpForm.controls.password.errors?.minlength">
				Password Needs to be
				<strong>
					{{ signUpForm.controls.password.errors?.minlength.requiredLength }} char
					long
				</strong>
			</mat-error>
			<mat-error *ngIf="signUpForm.controls.password.errors?.required">
				Password is <strong>required</strong>
			</mat-error>
		</mat-form-field>
		<mat-form-field>
			<mat-label>Repeat Password</mat-label>
			<input
				type="password"
				matInput
				formControlName="password_confirm"
				[errorStateMatcher]="matcher" />
			<mat-error
				*ngIf="signUpForm.controls.password_confirm.errors?.matchValidator">
				Password Does Not
				<strong>Match</strong>
			</mat-error>
			<mat-error *ngIf="signUpForm.controls.password_confirm.errors?.required">
				Password is <strong>required</strong>
			</mat-error>
		</mat-form-field>
		<!-- Usage -->
		<div radio-group>
			<mat-label>What is your intended useage?</mat-label>
			<mat-radio-group formControlName="usage">
				<mat-radio-button
					*ngFor="let usage of usageList"
					[value]="usage.value"
					[checked]="usage.checked"
					[class.error]="
						signUpForm.get('usage').hasError('required') &&
						signUpForm.get('usage').touched
					"
					>{{ usage.label }}</mat-radio-button
				>
			</mat-radio-group>
			<div class="info-wrapper">
				<span class="info"
					>We ask this to make a note on our records when we issue your game code,
					so that we can best support you with relevant content (ie not send you
					update information that has no relevance to your usage)
				</span>
			</div>
			<span
				class="error-span"
				*ngIf="
					signUpForm.get('usage').touched &&
					signUpForm.get('usage').hasError('required')
				">
				Intended usage is <strong>required</strong>
			</span>
		</div>

		<mat-form-field>
			<mat-label>Comments</mat-label>
			<textarea
				matInput
				formControlName="comments"
				cdkTextareaAutosize
				#autsize="cdkTextareaAutosize"
				cdkAutosizeMinRows="1"
				cdkAutosizeMaxRows="10"></textarea>
		</mat-form-field>
	</form>
</div>
<div mat-dialog-actions>
	<button
		mat-button
		(click)="submitForm()"
		cdkFocusInitial>
		Ok
	</button>
	<button
		mat-button
		color="warn"
		(click)="onNoClick()">
		Cancel
	</button>
</div>
<!-- <h1 mat-dialog-title
    *ngIf="data.type == 'login'"> Please Sign In </h1>
<h1 mat-dialog-title
    *ngIf="data.type == 'signUp'"> Please Sign Up </h1>
<div mat-dialog-content>
  <form [formGroup]="signInForm"
        *ngIf="data.type == 'login'">
    <mat-tab-group animationDuration="0ms">
      <mat-tab label="Slot"
               *ngIf="data.type === 'slot' ">
      </mat-tab>
  </form>
  <form>
    <mat-tab [formGroup]="signInForm"
             *ngIf="data.type == 'login'">
      <mat-tab label="Username"
               *ngIf="data.type=== 'username'"></mat-tab>
    </mat-tab>
  </form>
  </mat-tab-group> -->
